<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>GoLang bindings for Telegraph API</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="shortcut icon" href="static/favicon.ico">
    <meta name="author" content="Maxim Lebedev">

    <meta name="og:type" content="website">
    <meta name="og:site_name" content="toby3d">
    <meta name="og:title" content="GoLang bindings for Telegraph API">
    <meta name="og:description" content="This project is just to provide a wrapper around API without any additional features">
    <meta name="og:url" content="https://toby3d.github.io/go-telegraph/">
    <meta name="og:locale" content="en_US">
    <meta name="og:image" content="static/og-image.jpg">
    <meta name="og:image:width" content="1162">
    <meta name="og:image:height" content="696">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="GoLang bindings for Telegraph API">
    <meta name="twitter:description" content="This project is just to provide a wrapper around API without any additional features">
    <meta name="twitter:image:src" content="static/og-image.jpg">
    <meta name="twitter:url" content="https://toby3d.github.io/go-telegraph/">
    <meta name="twitter:domain" content="toby3d.github.io">
    <meta name="twitter:site" content="@toby3d">
    <meta name="twitter:creator" content="@toby3d">

    <meta name="fb:profile_id" content="100001181798453">

    <link rel="canonical" href="https://toby3d.github.io/go-telegraph/">
    <link rel="stylesheet" href="static/style.css">
  </head>
  <body>
    <div class="page_wrap">
      <div class="page">
        <main class="article">
          <header class="article_header">
            <h1>GoLang bindings for the Telegraph API</h1>
          </header>
          <address>
            <a rel="author" href="//toby3d.github.io">Maxim Lebedev</a>
            <time datetime="2016-12-25T00:00:00+0000">December 25, 2016</time>
          </address>
          <article class="article_content">
            <p><img src="static/og-image.jpg" alt="Telegraph cover" /></p>
            <p><strong>Telegra.ph</strong> is a minimalist publishing tool that allows you to create richly formatted posts and push them to the Web in just a click. <strong>Telegraph</strong> posts also get beautiful <a href="//telegram.org/blog/instant-view">Instant View</a> pages on <strong>Telegram</strong>.</p>
            <p>At first, you need to download or update it:<br/><code>$ go get -u github.com/toby3d/go-telegraph</code></p>
            <p>And import it in your Go code:<br/><code>import telegraph "github.com/toby3d/go-telegraph"</code></p>
            <a href="#available-methods"><h4>1. Methods</h4></a>
            <ul>
              <li><a href="#createaccount">CreateAccount</a></li>
              <li><a href="#createpage">CreatePage</a></li>
              <li><a href="#editaccountinfo">EditAccountInfo</a></li>
              <li><a href="#editpage">EditPage</a></li>
              <li><a href="#getaccountinfo">GetAccountInfo</a></li>
              <li><a href="#getpage">GetPage</a></li>
              <li><a href="#getpagelist">GetPageList</a></li>
              <li><a href="#getviews">GetViews</a></li>
              <li><a href="#revokeaccesstoken">RevokeAccessToken</a></li>
            </ul>
            <a href="#available-types"><h4>2. Types</h4></a>
            <ul>
              <li><a href="#account">Account</a></li>
              <li><a href="#node">Node</a></li>
              <li><a href="#nodeelement">NodeElement</a></li>
              <li><a href="#page">Page</a></li>
              <li><a href="#pagelist">PageList</a></li>
              <li><a href="#pageviews">PageViews</a></li>
            </ul>
            <h4 id="3-content-format">
              <a href="#content-format">3. Content format</a>
            </h4>
            <hr>
            <h3 id="available-methods">Available methods</h3>
            <p>Library used <strong>POST</strong> HTTP method. The response contains a JSON object, which always has a Boolean field <code>ok</code>. If <code>ok</code> equals <em>true</em>, the request was successful, and the result of the query can be found in the <code>result</code> field. In case of an unsuccessful request, <code>ok</code> equals <em>false</em>, and the error is explained in the error field (e.g. SHORT_NAME_REQUIRED). All queries must be made using UTF-8.</p>
            <h4 id="createaccount">CreateAccount</h4>
            <p>Use this method to create a new Telegraph account. Most users only need one account, but this can be useful for channel administrators who would like to keep individual author names and profile links for each of their channels. On success, returns an <a href="#account">Account</a> object with the regular fields and an additional <code>access_token</code> field.</p>
            <ul>
              <li><strong>account</strong> (<a href="#account"><em>Account</em></a>)<br/>Telegraph account.</li>
            </ul>
            <blockquote>
              <p><strong>Sample code</strong></p>
<pre class="highlight"><code>account, _ := telegraph.CreateAccount(&amp;telegraph.Account{ShortName: "Sandbox", AuthorName: "Anonymous"})</code></pre>
            </blockquote>
            <h4 id="editaccountinfo">EditAccountInfo</h4>
            <p>Use this method to update information about a Telegraph account. Pass only the parameters that you want to edit. On success, returns an <a href="#account">Account</a> object with the default fields.</p>
            <ul>
              <li><strong>update</strong> (<em><a href="#account">Account</a></em>)<br/>Telegraph account.</li>
            </ul>
            <blockquote>
              <p><strong>Sample code</strong></p>
<pre class="highlight"><code>account, _ = account.EditAccountInfo(&amp;telegraph.Account{ShortName: "Sandbox", AuthorName: "Anonymous"})</code></pre>
            </blockquote>
            <h4 id="getaccountinfo">GetAccountInfo</h4>
            <p>Use this method to get information about a Telegraph account. Returns an <a href="#account">Account</a> object on success.</p>
            <ul>
              <li><strong>fields</strong> (<em>…string</em>)<br/>List of account fields to return. Available fields: <em>short_name</em>, <em>author_name</em>, <em>author_url</em>, <em>auth_url</em>, <em>page_count</em>.</li>
            </ul>
            <blockquote>
              <p><strong>Sample code</strong></p>
<pre class="highlight"><code>account, _ = account.GetAccountInfo("short_name", "page_count")</code></pre>
            </blockquote>
            <h4 id="revokeaccesstoken">RevokeAccessToken</h4>
            <p>Use this method to revoke access_token and generate a new one, for example, if the user would like to reset all connected sessions, or you have reasons to believe the token was compromised. On success, returns an <a href="#account">Account</a> object with new <code>access_token</code> and <code>auth_url</code> fields.</p>
            <blockquote>
              <p><strong>Sample code</strong></p>
<pre class="highlight"><code>account, _ = account.RevokeAccessToken()</code></pre>
            </blockquote>
              <h4 id="createpage">CreatePage</h4>
              <p>Use this method to create a new Telegraph page. On success, returns a <a href="#page">Page</a> object.</p>
              <ul>
                <li><strong>page</strong> (<em><a href="#page">Page</a></em>)<br/>Page on Telegraph.</li>
                <li><strong>returnContent</strong> (<em>bool</em>)<br/>If <em>true</em>, a <code>content</code> field will be returned in the <a href="#page">Page</a> object (see: <a href="#content-format">Content format</a>).</li>
              </ul>
            <blockquote>
              <p><strong>Sample code</strong></p>
<pre class="highlight"><code>page, _ := account.CreatePage(&amp;telegraph.Page{Title: "Sample Page", AuthorName: account.AuthorName, Content: content}, true)</code></pre>
            </blockquote>
              <h4 id="editpage">EditPage</h4>
              <p>Use this method to edit an existing Telegraph page. On success, returns a <a href="#page">Page</a> object.</p>
              <ul>
                <li><strong>update</strong> (<em><a href="#page">Page</a></em>)<br/>Page on Telegraph.</li>
                <li><strong>returnContent</strong> (<em>bool</em>)<br/>If <em>true</em>, <code>content</code> field will be returned in <a href="#page">Page</a> object.</li>
              </ul>
            <blockquote>
              <p><strong>Sample code</strong></p>
<pre class="highlight"><code>page, _ := account.EditPage(&amp;telegraph.Page{Title: "Sample Page", AuthorName: account.AuthorName, Content: content}, true)</code></pre>
            </blockquote>
            <h4 id="getpage">GetPage</h4>
            <p>Use this method to get a Telegraph page. Returns a <a href="#page">Page</a> object on success.</p>
            <ul>
              <li><strong>path</strong> (<em>string</em>)<br/><em>Required.</em> Path to the Telegraph page (in the format <code>Title-12-31</code>, i.e. everything that comes after <code>http://telegra.ph/</code>).</li>
              <li><strong>returnContent</strong> (<em>bool</em>)<br/>If <em>true</em>, <code>content</code> field will be returned in <a href="#page">Page</a> object.</li>
            </ul>
            <blockquote>
              <p><strong>Sample code</strong></p>
<pre class="highlight"><code>page, _ := telegraph.GetPage("Sample-Page-12-15", true)</code></pre>
            </blockquote>
            <h4 id="getpagelist">GetPageList</h4>
            <p>Use this method to get a list of pages belonging to a Telegraph account. Returns a <a href="#pagelist">PageList</a> object, sorted by most recently created pages first.</p>
            <ul>
              <li><strong>offset</strong> (<em>int</em>)<br/>Sequential number of the first page to be returned.</li>
              <li><strong>limit</strong> (<em>int, 0-200</em>)<br/>Limits the number of pages to be retrieved.</li>
            </ul>
            <blockquote>
              <p><strong>Sample code</strong></p>
<pre class="highlight"><code>pages, _ := account.GetPageList(0, 3)</code></pre>
            </blockquote>
            <h4 id="getviews">GetViews</h4>
            <p>Use this method to get the number of views for a Telegraph article. Returns a <a href="#pageviews">PageViews</a> object on success. By default, the total number of page views will be returned.</p>
            <ul>
              <li><strong>path</strong> (<em>string</em>)<br/><em>Required.</em> Path to the Telegraph page (in the format <code>Title-12-31</code>, where 12 is the month and 31 the day the article was first published).</li>
              <li><strong>year</strong> (<em>int, 2000-2100 or 0</em>)<br/><em>Required if month is passed.</em> If passed, the number of page views for the requested year will be returned.</li>
              <li><strong>month</strong> (<em>int, 1-12 or 0</em>)<br/><em>Required if day is passed.</em> If passed, the number of page views for the requested month will be returned.</li>
              <li><strong>day</strong> (<em>int, 1-31 or 0</em>)<br/><em>Required if hour is passed.</em> If passed, the number of page views for the requested day will be returned.</li>
              <li><strong>hour</strong> (<em>int, 0-24 or -1</em>)<br/>If passed, the number of page views for the requested hour will be returned.</li>
            </ul>
            <blockquote>
              <p><strong>Sample code</strong></p>
<pre class="highlight"><code>views, _ := telegraph.GetViews("Sample-Page-12-15", 2016, 12, 0, -1)</code></pre>
            </blockquote>
            <h3 id="available-types">Available types</h3>
            <p>All types used in the Telegraph API responses are represented as JSON-objects. Optional fields may be <code>nil</code> when irrelevant.</p>
            <h4 id="account">Account</h4>
            <p>This object represents a Telegraph account.</p>
            <ul>
              <li><strong>AccessToken</strong> (<em>string</em>)<br/><em>Optional. Only returned by the <a href="#createaccount">CreateAccount</a> and <a href="#revokeaccesstoken">RevokeAccessToken</a> method.</em> Access token of the Telegraph account.</li>
              <li><strong>AuthURL</strong> (<em>string</em>)<br/><em>Optional.</em> URL to authorize a browser on <a href="//telegra.ph">telegra.ph</a> and connect it to a Telegraph account. This URL is valid for only one use and for 5 minutes only.</li>
              <li><strong>ShortName</strong> (<em>string</em>)<br/>Account name, helps users with several accounts remember which they are currently using. Displayed to the user above the “Edit/Publish” button on Telegra.ph, other users don’t see this name.</li>
              <li><strong>AuthorName</strong> (<em>string</em>)<br/>Default author name used when creating new articles.</li>
              <li><strong>AuthorURL</strong> (<em>string</em>)<br/>Profile link, opened when users click on the author’s name below the title. Can be any link, not necessarily to a Telegram profile or channel.</li>
              <li><strong>PageCount</strong> (<em>int</em>)<br/><em>Optional.</em> Number of pages belonging to the Telegraph account.</li>
            </ul>
            <h4 id="pagelist">PageList</h4>
            <p>This object represents a list of Telegraph articles belonging to an account. Most recently created articles first.</p>
            <ul>
              <li><strong>TotalCount</strong> (<em>int</em>)<br/>Total number of pages belonging to the target Telegraph account.</li>
              <li><strong>Pages</strong> (<em>[]<a href="#page">Page</a></em>)<br/>Requested pages of the target Telegraph account.</li>
            </ul>
            <h4 id="page">Page</h4>
            <p>This object represents a page on Telegraph.</p>
            <ul>
              <li><strong>AuthorName</strong> (<em>string</em>)<br/><em>Optional.</em> Name of the author, displayed below the title.</li>
              <li><strong>AuthorURL</strong> (<em>string</em>)<br/><em>Optional.</em> Profile link, opened when users click on the author’s name below the title. Can be any link, not necessarily to a Telegram profile or channel.</li>
              <li><strong>CanEdit</strong> (<em>bool</em>)<br/><em>Optional. Only returned if AccessToken passed. True</em>, if the target Telegraph account can edit the page.</li>
              <li><strong>Content</strong> (<em>[]<a href="#node">Node</a></em>)<br/><em>Optional.</em> <a href="#content-format">Content</a> of the page.</li>
              <li><strong>Description</strong> (<em>string</em>)<br/>Description of the page.</li>
              <li><strong>ImageURL</strong> (<em>string</em>)<br/><em>Optional.</em> Image URL of the page.</li>
              <li><strong>Path</strong> (<em>string</em>)<br/>Path to the page.</li>
              <li><strong>Title</strong> (<em>string</em>)<br/>Title of the page.</li>
              <li><strong>URL</strong> (<em>string</em>)<br/>URL of the page.</li>
              <li><strong>Views</strong> (<em>int</em>)<br/>Number of page views for the page.</li>
            </ul>
            <h4 id="pageviews">PageViews</h4>
            <p>This object represents the number of page views for a Telegraph article.</p>
            <ul>
              <li><strong>Views</strong> (<em>int</em>)<br/>Number of page views for the target page.</li>
            </ul>
            <h4 id="node">Node</h4>
            <p>This abstract object represents a DOM Node. It can be a <em>string</em> which represents a DOM text node or a <a href="#nodeelement">NodeElement</a> object.</p>
            <ul>
              <li><strong>Node</strong> (<em>interface{}</em>)</li>
            </ul>
            <h4 id="nodeelement">NodeElement</h4>
            <p>This object represents a DOM element node.</p>
            <ul>
              <li><strong>Attrs</strong> (<em>map[string]string</em>)<br/><em>Optional.</em> Attributes of the DOM element. Key of object represents name of attribute, value represents value of attribute. Available attributes: <em>href, src</em>.</li>
              <li><strong>Children</strong> (<em>[]<a href="#node">Node</a></em>)<br/><em>Optional.</em> List of child nodes for the DOM element.</li>
              <li><strong>Tag</strong> (<em>string</em>)<br/>Name of the DOM element. Available tags: <em>a, aside, b, blockquote, br, code, em, figcaption, figure, h3, h4, hr, i, iframe, img, li, ol, p, pre, s, strong, u, ul, video</em>.</li>
            </ul>
            <h3 id="content-format">Content format</h3>
            <p>The Telegraph API uses a DOM-based format to represent the content of the page. Below is an example of code in Go which explains how you can use it:</p>
<pre class="highlight"><code>const data = `&lt;figure&gt;&lt;img src="http://telegra.ph/file/6a5b15e7eb4d7329ca7af.jpg" /&gt;&lt;/figure&gt;&lt;p&gt;&lt;i&gt;Hello&lt;/i&gt;, my name is &lt;b&gt;Page&lt;/b&gt;, &lt;u&gt;look at me&lt;/u&gt;!&lt;/p&gt;&lt;figure&gt;&lt;iframe src="https://youtu.be/fzQ6gRAEoy0"&gt;&lt;/iframe&gt;&lt;figcaption&gt;Yes, you can embed youtube, vimeo and twitter widgets too!&lt;/figcaption&gt;&lt;/figure&gt;`

content, _ := telegraph.ContentFormat(data)</code></pre>
          </article>
          <aside class="article_buttons">
            <a class="button" href="//github.com/toby3d/go-telegraph" target="_blank">GitHub</a>
          </aside>
        </main>
      </div>
    </div>

    <!-- Yandex.Metrika counter --> <script > (function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter21389077 = new Ya.Metrika({ id:21389077, clickmap:true, trackLinks:true, accurateTrackBounce:true, webvisor:true }); } catch(e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = "//mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks"); </script> <noscript><div><img src="//mc.yandex.ru/watch/21389077" style="position:absolute; left:-9999px;" alt="" /></div></noscript> <!-- /Yandex.Metrika counter -->
    <!-- Google Analytics --><script async src="//www.googletagmanager.com/gtag/js?id=UA-79389304-4"></script><script>window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments)}; gtag('js', new Date()); gtag('config', 'UA-79389304-4');</script><!-- /Google Analytics -->
  </body>
</html>